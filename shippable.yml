language: java
jdk:
  - oraclejdk8

install:
  - ./gradlew unzipWildfly
  - ./gradlew assemble

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - ./gradlew check

after_script:
  - cp build/test-results/*.xml shippable/testresults/
  - cp build/reports/cobertura/coverage.xml shippable/codecoverage

before_archive:
  - rm -rf shippable/testresults
  - rm -rf shippable/codecoverage

notifications:
  email:
    recipients:
      - giovanni@atende.info
    on_success: change
    on_failure: always